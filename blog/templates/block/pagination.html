{% load filters %}
{% if posts.paginator.num_pages != 1 %}
<nav aria-label="Навигация" class="mt-3">
    <ul class="pagination">
        {% if posts.number|not_in:"1,2,3" %}
        <li class="page-item"><a class="page-link" href="?page=1">Первая</a></li>
        {% endif %}
        {% for page_num in custom_range %}
        {% if page_num == posts.number %}
        <li class="page-item"><a class="page-link active" href="?page={{ page_num }}">{{ page_num }}</a></li>
        {% else %}
        <li class="page-item"><a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a></li>
        {% endif %}
        {% endfor %}

        {% if posts.number != posts.paginator.num_pages|minus_one and posts.has_next %}
        <li class="page-item"><a class="page-link" href="">...</a></li>
        {% endif %}
        {% if posts.number == posts.paginator.num_pages %}
        <li class="page-item"><a class="page-link active" href="?page={{ posts.paginator.num_pages }}">{{ posts.paginator.num_pages }}</a></li>
        {% else %}
        <li class="page-item"><a class="page-link" href="?page={{ posts.paginator.num_pages }}">Последняя</a></li>
        {% endif %}
    </ul>
</nav>
{% endif %}